# Using your own SSL certificate with Portainer

By default, Portainerâ€™s web interface and API is exposed over HTTPS with a self-signed certificate generated by the installation. This can be replaced with your own SSL certificate either after installation [via the Portainer UI](../admin/settings/#ssl-certificate) or during installation, as explained in this article.

{% hint style="info" %}
When using your own externally-issued certificate, ensure that you include the full certificate chain \(including any intermediate certificates\) in the file you provide via `--sslcert`. Without this you may face certificate validation issues. Your certificate chain can be obtained either from your certificate issuer or the [What's My Chain Cert?](https://whatsmychaincert.com/) website.
{% endhint %}

## Using your own SSL certificate on Docker Standalone

{% hint style="info" %}
Portainer expects certificates in PEM format.
{% endhint %}

Use the `--sslcert` and `--sslkey` flags during installation.

Upload your certificate \(including the chain\) and key to the server running Portainer, then start Portainer referencing them. The following command assumes your certificates are stored in `/path/to/your/certs` with the filenames `portainer.crt` and `portainer.key`, and bind-mounts the directory to `/certs` in the Portainer container:

```text
docker run -d -p 9443:9443 -p 8000:8000 \
    --name portainer --restart always \
    -v /var/run/docker.sock:/var/run/docker.sock \
    -v portainer_data:/data \
    -v /path/to/your/certs:/certs \
    portainer/portainer-ce:2.9.0 --sslcert /certs/portainer.crt --sslkey /certs/portainer.key
```

Alternatively, Certbot can be used to generate a certificate and a key. Because Docker has issues with symlinks, if you use Certbot you will need to pass both the 'live' and 'archive' directories as volumes. For example:

```text
docker run -d -p 9443:9443 -p 8000:8000 \
    --name portainer --restart always \
    -v /var/run/docker.sock:/var/run/docker.sock \
    -v portainer-data:/data \
    -v /etc/letsencrypt/live/yourdomain:/certs/live/yourdomain:ro \
    -v /etc/letsencrypt/archive/yourdomain:/certs/archive/yourdomain:ro \
    portainer/portainer-ce:2.9.0 --sslcert /certs/live/yourdomain/cert.pem --sslkey /certs/live/yourdomain/privkey.pem
```

When you're finished, you can navigate to `https://$ip-docker-host:9443`.

## Using your own SSL certificate on Docker Swarm

To provide your own SSL certificate for Docker Swarm, simply define the `portainer.sslcert` and `portainer.sslkey` secrets, and the installation manifest will automatically detect and use them:

```text
docker secret create portainer.sslcert /path/to/your/certificate.crt
docker secret create portainer.sslkey /path/to/your/certificate.key
```

Next, retrieve the stack YML manifest:

{% tabs %}
{% tab title="Linux and Windows with Docker Desktop" %}
```text
curl -L https://downloads.portainer.io/CE2.9/portainer-agent-stack-ssl.yml \
    -o portainer-agent-stack.yml
```
{% endtab %}

{% tab title="Windows Container Services" %}
```text
curl https://downloads.portainer.io/CE2.9/portainer-windows-stack-ssl.yml `
    -o portainer-agent-stack.yml
```
{% endtab %}
{% endtabs %}

Finally, use the downloaded YML manifest to deploy your stack:

```text
docker stack deploy -c portainer-agent-stack.yml portainer
```

For more information about secrets, read [Docker's own documentation](https://docs.docker.com/compose/compose-file/#secrets).

## Using your own SSL certificate on Kubernetes

We recommend installing using the self-signed certificate then replacing the certificate post-installation with your own [via the Portainer UI](../admin/settings/#ssl-certificate).

